<div class="categories-page">
  <header class="header">
    <div>
      <h2>Categories</h2>
      <p>Organize your product catalog</p>
    </div>
    <button class="btn-primary" (click)="startCreate()">
      + New category
    </button>
  </header>

  <section class="content">
    <!-- Left: list -->
    <div class="list-panel">
      <div class="toolbar">
        <input
          type="text"
          placeholder="Search categories..."
          [(ngModel)]="search"
        />
      </div>

      <div class="list-header">
        <span>Name</span>
        <span>Products</span>
        <span>Status</span>
        <span></span>
        <span></span>

      </div>

      <div
        class="list-row"
        *ngFor="let cat of filteredCategories()"
        [class.active]="cat.id === selectedCategory?.id"
      >
        <span class="name">{{ cat.name }}</span>
        <span>{{ cat.productCount }}</span>
        <span>
          <span
            class="status-chip"
            [class.active]="cat.isActive"
            [class.inactive]="!cat.isActive"
          >
            {{ cat.isActive ? 'Active' : 'Inactive' }}
          </span>
        </span>
        <!-- <span class="actions">
          <button class="link-btn" (click)="startEdit(cat)">Edit</button>
        </span> -->
        <span class="actions">
  <button class="link-btn" (click)="startEdit(cat)">Edit</button>
  <button class="link-btn danger" (click)="deleteCategory(cat); $event.stopPropagation()">
    Delete
  </button>
</span>

      </div>
    </div>

    <!-- Right: form -->
    <div class="form-panel" *ngIf="isPanelOpen">
      <div class="form-header">
        <div>
          <h3>{{ isEditing ? 'Edit category' : 'Create category' }}</h3>
          <p>
            {{ isEditing ? 'Update category details' : 'Add a new category' }}
          </p>
        </div>
        <button class="icon-btn" (click)="closePanel()">âœ•</button>
      </div>

      <form [formGroup]="categoryForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <label>Name</label>
          <input type="text" formControlName="name" />
          <div class="error" *ngIf="hasError('name', 'required')">
            Name is required
          </div>
        </div>

        <div class="form-group">
          <label>Description</label>
          <textarea rows="3" formControlName="description"></textarea>
        </div>

        <div class="form-group-inline">
          <label class="checkbox">
            <input type="checkbox" formControlName="isActive" />
            <span>Active</span>
          </label>
        </div>

        <div class="form-actions">
          <button type="button" class="btn-ghost" (click)="closePanel()">
            Cancel
          </button>
          <button type="submit" class="btn-primary" [disabled]="categoryForm.invalid">
            {{ isEditing ? 'Save changes' : 'Create category' }}
          </button>
        </div>
      </form>
    </div>
  </section>
</div>
